<!doctype html>
<html lang="zh-tw">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="pragma" content="no-cache">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="author" content="oxxo.studio">
  <meta name="copyright" content="oxxo.studio">
  <meta name="keywords" content="CSS,CSS3,教學,animation,google,loading,網頁前端,oxxo,前端技術,css animation,css transition">
  <meta property="article:published_time" content="2014-06-29T23:55:00+01:00">

  <link rel="author" href="https://plus.google.com/105185415102049371674/posts">
  <link rel="publisher" href="https://plus.google.com/105185415102049371674">
  <meta name="description" content="隨著扁平化設計風格的興起，Google 的載入進度動畫也就變得相當的扁平風且具有設計感，後來發現不只手機的載入進度是用扁平化的風格，連 Google plus、Gmail...等 Google 產品都是使用類似的載入進度動畫，一時興起，使用 CSS3 做了一組 Google 的載入動畫。">

  <meta itemprop="name" content="CSS3動畫 - Google Loading Animation - OXXO.STUDIO">
  <meta itemprop="image" content="http://www.oxxostudio.tw/img/articles/201406/20140629_1_01.gif">
  <meta itemprop="description" content="隨著扁平化設計風格的興起，Google 的載入進度動畫也就變得相當的扁平風且具有設計感，後來發現不只手機的載入進度是用扁平化的風格，連 Google plus、Gmail...等 Google 產品都是使用類似的載入進度動畫，一時興起，使用 CSS3 做了一組 Google 的載入動畫。">

  <meta property="og:title" content="CSS3動畫 - Google Loading Animation - OXXO.STUDIO">
  <meta property="og:url" content="http://www.oxxostudio.tw/articles/201406/css-google-loading.html">
  <meta property="og:image" content="http://www.oxxostudio.tw/img/articles/201406/20140629_1_01.gif">
  <meta property="og:description" content="隨著扁平化設計風格的興起，Google 的載入進度動畫也就變得相當的扁平風且具有設計感，後來發現不只手機的載入進度是用扁平化的風格，連 Google plus、Gmail...等 Google 產品都是使用類似的載入進度動畫，一時興起，使用 CSS3 做了一組 Google 的載入動畫。">

  <script src="/js/lib/jquery.min.js"></script>
  <script src="/js/lib/run_prettify.js"></script>
  <link rel="stylesheet" href="/style/css/layout.css">
  <link rel="stylesheet" href="/style/css/articles-content.css">
  <link rel="stylesheet" href="/style/lib/tomorrow.css">

  <title>CSS3動畫 - Google Loading Animation - OXXO.STUDIO</title>
  <style>
  .google_loading {
    position:relative;
    display:table;
    height:120px;
  }
  .div0, .div1, .div2 {
    width:100px;
    height:100px;
    position:absolute;
    z-index:10;
    -webkit-perspective:200px;
    -webkit-perspective-origin:50px 50px;
    -webkit-transform-style: preserve-3d;
  }
  .div0_1, .div1_1, .div2_1 {
    position:absolute;
    top:0;
    left:50px;
    width:50px;
    height:100px;
    background:#000;
    border-radius:0 50px 50px 0;
    -webkit-transform-origin:0 50%;
    -webkit-transform:rotateY(0deg);
  }
  .div0 {
    -webkit-animation:move0_key 3s linear infinite both;
  }
  .div1 {
    -webkit-animation:move1_key 3s linear infinite both;
  }
  .div2 {
    -webkit-animation:move2_key 3s linear infinite both;
  }
  .div0_1 {
    -webkit-animation:color0_key 3s linear infinite both;
  }
  .div1_1 {
    -webkit-animation:color1_key 3s linear infinite both;
  }
  .div2_1 {
    -webkit-animation:color2_key 3s linear infinite both;
  }
  @-webkit-keyframes move0_key {
    0% {
      -webkit-transform:rotateZ(180deg) rotateY(180deg);
    }
    12.5% {
      -webkit-transform:rotateZ(180deg) rotateY(90deg);
    }
    25% {
      -webkit-transform:rotateZ(180deg) rotateY(0deg);
    }
    25.01% {
      -webkit-transform:rotateZ(90deg) rotateY(0deg);
    }
    37.5% {
      -webkit-transform:rotateZ(90deg) rotateY(-90deg);
    }
    50% {
      -webkit-transform:rotateZ(90deg) rotateY(-180deg);
    }
    50.01% {
      -webkit-transform:rotateZ(0deg) rotateY(-180deg);
    }
    62.5% {
      -webkit-transform:rotateZ(0deg) rotateY(-90deg);
    }
    75% {
      -webkit-transform:rotateZ(0deg) rotateY(0deg);
    }
    75.01% {
      -webkit-transform:rotateZ(-90deg) rotateY(0deg);
    }
    87.5% {
      -webkit-transform:rotateZ(-90deg) rotateY(90deg);
    }
    100% {
      -webkit-transform:rotateZ(-90deg) rotateY(180deg);
    }
  }
  @-webkit-keyframes color0_key {
    0% {
      background: #f52d27;
    }
    12.5% {
      background: #7d0906;
    }
    25% {
      background: #ffd539;
    }
    37.5% {
      background: #9f7d00;
    }
    50% {
      background: #00b262;
    }
    62.5% {
      background: #00190e;
    }
    75% {
      background: #3a71f8;
    }
    87.5% {
      background: #052e94;
    }
    100% {
      background: #f52d27;
    }
  }
  @-webkit-keyframes move1_key {
    0% {
      -webkit-transform:rotateZ(0deg);
    }
    25% {
      -webkit-transform:rotateZ(0deg);
    }
    25.01% {
      -webkit-transform:rotateZ(90deg);
    }
    50% {
      -webkit-transform:rotateZ(90deg);
    }
    50.01% {
      -webkit-transform:rotateZ(180deg);
    }
    75% {
      -webkit-transform:rotateZ(180deg);
    }
    75.01% {
      -webkit-transform:rotateZ(270deg);
    }
    100% {
      -webkit-transform:rotateZ(270deg);
    }
  }
  @-webkit-keyframes color1_key {
    0% {
      background: #ffd539;
    }
    25% {
      background: #ffd539;
    }
    25.01% {
      background: #00b262;
    }
    50% {
      background: #00b262;
    }
    50.01% {
      background: #3a71f8;
    }
    75% {
      background: #3a71f8;
    }
    75.01% {
      background: #f52d27;
    }
    100% {
      background: #f52d27;
    }
  }
  @-webkit-keyframes move2_key {
    0% {
      -webkit-transform:rotateZ(-180deg);
    }
    25% {
      -webkit-transform:rotateZ(-180deg);
    }
    25.01% {
      -webkit-transform:rotateZ(-90deg);
    }
    50% {
      -webkit-transform:rotateZ(-90deg);
    }
    50.01% {
      -webkit-transform:rotateZ(0deg);
    }
    75% {
      -webkit-transform:rotateZ(0deg);
    }
    75.01% {
      -webkit-transform:rotateZ(90deg);
    }
    100% {
      -webkit-transform:rotateZ(90deg);
    }
  }
  @-webkit-keyframes color2_key {
    0% {
      background: #f52d27;
    }
    25% {
      background: #f52d27;
    }
    25.01% {
      background: #ffd539;
    }
    50% {
      background: #ffd539;
    }
    50.01% {
      background: #00b262;
    }
    75% {
      background: #00b262;
    }
    75.01% {
      background: #3a71f8;
    }
    100% {
      background: #3a71f8;
    }
  }
  </style>
</head>

<body>
  <div id="header">
  </div>
  <div id="wrapper">
    <div id="container">
      <div class="content">
        <i class="tag-css"></i>
        <div class="md">
          <h2>CSS3動畫 - Google Loading Animation</h2>
          <p>
            <span itemprop="description" class="desc">自從使用了智慧型手機之後，就常常在觀察手機 UI 的設計細節，隨著扁平化設計風格的興起，Google 的載入進度動畫也就變得相當的扁平風且具有設計感，後來發現不只手機的載入進度是用扁平化的風格，連 Google plus、Gmail...等 Google 產品都是使用類似的載入進度動畫，一時興起，使用 CSS3 做了一組 Google 的載入動畫。</span>( 凡是跟 Google 沾上邊好像就高級了一些，不過有些電腦效能比較差的會有些閃爍 )</p>
          <div class='google_loading'>
            <div class='div2'>
              <div class='div2_1'></div>
            </div>
            <div class='div1'>
              <div class='div1_1'></div>
            </div>
            <div class='div0'>
              <div class='div0_1'></div>
            </div>
          </div>
          <p>在製作載入動畫之前，我們必須要先有 CSS3 的動畫概念以及立體的概念，不過因為這篇不是介紹 CSS3 動畫與立體，因此這邊就不太過著墨，直接來看成品的程式碼來一步步說明。</p>
          <p>首先看到動畫的架構，主要分為了三個層，一個是<strong>定位層</strong> ( #google_loading )，一個是<strong>父層</strong> ( #div2、#div1、#div0 )，最後一個是<strong>子層</strong> ( #div2
            <em>1、#div1</em>1、#div0_1 )，定位層目的在於讓整個 loading 可以做定位，位置不會影響到內容，父層包含了 3D 的透視點 perspective，因為在父層進行透視的設定，子層的元素才能按照統一的透視點做 3D 的變化。</p>
          <pre><code>  &lt;div id='google_loading'&gt;
    &lt;div id='div2'&gt;
      &lt;div id='div2_1'&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;div id='div1'&gt;
      &lt;div id='div1_1'&gt;&lt;/div&gt;
    &lt;/div&gt;
    &lt;div id='div0'&gt;
      &lt;div id='div0_1'&gt;&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
</code></pre>

          <p>
            <br/>
          </p>
          <p>讓我們把父層主要的 CSS 給打開來看，可以發現這裡設定了<code>perspective</code>和<code>perspective-origin</code>，這是透視點的距離和透視點的中心，不過這些都容易理解，比較重要的是要記得設定<code>transform-style: preserve-3d</code>，這是<strong>宣告父層空間是一個 3D 的空間</strong>，不然預設是<code>flat</code>，就只能做 2D 的變化。( 這裡有加 webkit 前綴字 )</p>
          <pre><code>#div0,#div1,#div2{
  width:100px;
  height:100px;
  position:absolute;
  z-index:10;
  -webkit-perspective:200px;
  -webkit-perspective-origin:50px 50px;
  -webkit-transform-style: preserve-3d;
}
</code></pre>

          <p>
            </br>
          </p>
          <p>再來看看子層主要的 CSS 結構，沒有太特別的，主要就是讓正方形的 div 利用<code>border-radius</code>方式變成<strong>半圓形</strong>，接著設定<code>transform-origin</code>讓旋轉時可以固定在直線的邊邊。</p>
          <pre><code>#div0_1,#div1_1,#div2_1{
  position:absolute;
  top:0;
  left:50px;
  width:50px;
  height:100px;
  background:#000;
  -webkit-border-radius:0 50px 50px 0;
  -webkit-transform-origin:0 50% 0;
  -webkit-transform:rotateY(0deg);
}
</code></pre>

          <p>
            </br>
          </p>
          <p>設定完成架構之後，就來看看動畫是如何運作，動畫運作的方式分成兩個，一個是顏色的變化，一個是翻轉，這裡我們將翻轉設定在父層，子層則是顏色的變化，如此一來兩個動畫同時運作，看起來就像是一邊翻轉一邊變色。</p>
          <pre><code>#div0{
  -webkit-animation:move0_key 3s linear infinite both;
}
#div1{
  -webkit-animation:move1_key 3s linear infinite both;
}
#div2{
  -webkit-animation:move2_key 3s linear infinite both;
}
#div0_1{
  -webkit-animation:color0_key 3s linear infinite both;
}
#div1_1{
  -webkit-animation:color1_key 3s linear infinite both;
}
#div2_1{
  -webkit-animation:color2_key 3s linear infinite both;
}
</code></pre>

          <p>
            <br/>
          </p>
          <p>至於為什麼要分成 1、2、3，其實這是三個動畫組成的一個動畫，若分開來看，其實三個動畫分別長這樣：</p>
          <div class='google_loading'>
            <div class='div2'>
              <div class='div2_1'></div>
            </div>
          </div>
          <div class='google_loading'>
            <div class='div1'>
              <div class='div1_1'></div>
            </div>
          </div>
          <div class='google_loading'>
            <div class='div0'>
              <div class='div0_1'></div>
            </div>
          </div>
          <p>補上完整的動畫程式碼：</p>
          <pre><code>@-webkit-keyframes move0_key{
  0%    {-webkit-transform:rotateZ(180deg) rotateY(180deg);}
  12.5% {-webkit-transform:rotateZ(180deg) rotateY(90deg);}
  25%   {-webkit-transform:rotateZ(180deg) rotateY(0deg);}
  25.01%{-webkit-transform:rotateZ(90deg)  rotateY(0deg);}
  37.5% {-webkit-transform:rotateZ(90deg)  rotateY(-90deg);}
  50%   {-webkit-transform:rotateZ(90deg)  rotateY(-180deg);}
  50.01%{-webkit-transform:rotateZ(0deg)   rotateY(-180deg);}
  62.5% {-webkit-transform:rotateZ(0deg)   rotateY(-90deg);}
  75%   {-webkit-transform:rotateZ(0deg)   rotateY(0deg);}
  75.01%{-webkit-transform:rotateZ(-90deg) rotateY(0deg);}
  87.5% {-webkit-transform:rotateZ(-90deg) rotateY(90deg);}
  100%  {-webkit-transform:rotateZ(-90deg) rotateY(180deg);}
}
@-webkit-keyframes color0_key{
  0%    {background: #f52d27;}
  12.5% {background: #7d0906;}
  25%   {background: #ffd539;}
  37.5% {background: #9f7d00;}
  50%   {background: #00b262;}
  62.5% {background: #00190e;}
  75%   {background: #3a71f8;}
  87.5% {background: #052e94;}
  100%  {background: #f52d27;}
}
@-webkit-keyframes move1_key{
  0%    {-webkit-transform:rotateZ(0deg);}
  25%   {-webkit-transform:rotateZ(0deg);}
  25.01%{-webkit-transform:rotateZ(90deg);}
  50%   {-webkit-transform:rotateZ(90deg);}
  50.01%{-webkit-transform:rotateZ(180deg);}
  75%   {-webkit-transform:rotateZ(180deg);}
  75.01%{-webkit-transform:rotateZ(270deg);}
  100%  {-webkit-transform:rotateZ(270deg);}
}
@-webkit-keyframes color1_key{
  0%    {background: #ffd539;}
  25%   {background: #ffd539;}
  25.01%{background: #00b262;}
  50%   {background: #00b262;}
  50.01%{background: #3a71f8;}
  75%   {background: #3a71f8;}
  75.01%{background: #f52d27;}
  100%  {background: #f52d27;}
}
@-webkit-keyframes move2_key{
  0%    {-webkit-transform:rotateZ(-180deg);}
  25%   {-webkit-transform:rotateZ(-180deg);}
  25.01%{-webkit-transform:rotateZ(-90deg);}
  50%   {-webkit-transform:rotateZ(-90deg);}
  50.01%{-webkit-transform:rotateZ(0deg);}
  75%   {-webkit-transform:rotateZ(0deg);}
  75.01%{-webkit-transform:rotateZ(90deg);}
  100%  {-webkit-transform:rotateZ(90deg);}
}
@-webkit-keyframes color2_key{
  0%    {background: #f52d27;}
  25%   {background: #f52d27;}
  25.01%{background: #ffd539;}
  50%   {background: #ffd539;}
  50.01%{background: #00b262;}
  75%   {background: #00b262;}
  75.01%{background: #3a71f8;}
  100%  {background: #3a71f8;}
}
</code></pre>
        </div>
      </div>
    </div>
  </div>
  <div id="other-articles">
  </div>
  <div id="disqus">
    <div id="disqus_thread"></div>
  </div>
  <div id="footer">
  </div>
  <script src="/js/layout.js"></script>
  <script src="/js/articles.js"></script>
  <script src="/js/lib/disqus.js"></script>
</body>

</html>
