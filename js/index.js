$(function(){function e(){$.getJSON("/json/articles.json",function(e){p=e,o()})}function n(n){$.getJSON("/json/pageList.json",function(t){var s;c=t.length,s=c<6?c:6;!function(e){var n,i;for((i=e+s)>=c&&(i=c),n=e;n<i;n++){var a;a=t[n].img?t[n].img:"/img"+t[n].site.replace(".html","-s.jpg"),$("#content-grid>ul").append('<li><i class="'+t[n].tag+'"></i><h2>'+t[n].title+'</h2><h3><i class="icon-date"></i>'+t[n].date+'</h3><h3><i class="icon-author"></i>OXXO.STUDIO</h3><a href="'+t[n].site+'" title="'+t[n].title+'"><div class="content-img"><span></span><img class="lazy" data-src="'+a+'"></div></a><div class="content-grid-line"></div><h4 content="'+t[n].site+'"></h4><a href="'+t[n].site+'"><div class="read-more">Read more</div></a></li>')}}(6*(-1+n)),g=$(".lazy"),e(),i(c,n),a(),l(),$(window).scroll(l)})}function t(n,t){$.getJSON("/json/pageList.json",function(a){c=a.length;var o,r,h=[],d=0;for(o=0;o<c;o++)a[o].tag==n&&(h[d]=a[o],d+=1);r=d<6?d:6;!function(e){var n,t;for((t=e+r)>=d&&(t=d),n=e;n<t;n++){var i;i=h[n].img?h[n].img:"/img"+h[n].site.replace(".html","-s.jpg"),$("#content-grid>ul").append('<li><i class="'+h[n].tag+'"></i><h2>'+h[n].title+'</h2><h3><i class="icon-date"></i>'+h[n].date+'</h3><h3><i class="icon-author"></i>OXXO.STUDIO</h3><a href="'+h[n].site+'"><div class="content-img"><span></span><img class="lazy" data-src="'+i+'"></div></a><div class="content-grid-line"></div><h4 content="'+h[n].site+'"></h4><a href="'+h[n].site+'"><div class="read-more">Read more</div></a></li>')}}(6*(-1+t)),g=$(".lazy"),e(),i(d,t),s(),l(),$(window).scroll(l)})}function i(e,n){var t;for(t=Math.ceil(e/6);t>=1;t--)$("#page-num").prepend('<div class="page-num" attr-page="'+t+'">'+t+"</div>");1!=n&&$("#page-num").prepend('<a class="go-home" href="/">Home</a><span class="dot">...</span>'),$(".page-num").hide(),$(".page-num").eq(n-1).show().addClass("now"),$(".page-num").eq(n).show(),$(".page-num").eq(n+1).show(),$(".page-num").eq(n+2).show(),$(".page-num").eq(n+3).show(),n-1==0||(n-2==0?($(".page-num").eq(n-2).show(),$(".page-num").eq(n+3).hide()):($(".page-num").eq(n-2).show(),$(".page-num").eq(n-3).show(),$(".page-num").eq(n+2).hide(),$(".page-num").eq(n+3).hide()))}function a(){$(".page-num").on("click",function(){var e=$(this).attr("attr-page");1==e?window.open(w,"_self"):window.open(w+"index.html?page="+e,"_self")})}function s(){$(".page-num").on("click",function(){var e=$(this).attr("attr-page");1==e?window.open(w+"index.html?"+d,"_self"):window.open(w+"index.html?"+d+"="+e,"_self")})}function o(){$("#content-grid>ul").find("h4").each(function(){var e=$(this),n=e.attr("content").split("/"),t="/"+n[n.length-2]+"/"+n[n.length-1];for(var i in p)for(var a in p[i])if(t=="/"+i+"/"+a+".html"){var s=p[i][a].body;e.html(s),e.html(e.text())}})}function l(){g.each(function(){if($(this).attr("data-src")){var e=$(this).attr("data-src");$(this).offset().top-f.height()<f.scrollTop()&&($(this).attr("src",e),$(this).removeAttr("data-src"))}})}var c,r,h,d,g,p,f=$(window),m=location.href,u=m.split("?"),v=m.split("/"),w=v[0]+"//"+v[2]+"/";-1!=m.indexOf(".html")&&-1==m.indexOf("?")&&(window.location.href="/"),u[1]?(r=u[1].split("="),d=r[0],(h=Number(r[1]))?"page"==d?n(h):-1!=d.indexOf("tag")?t(d,h):window.open("/","_self"):-1!=d.indexOf("tag")?t(d,1):window.open("/","_self")):n(1)});