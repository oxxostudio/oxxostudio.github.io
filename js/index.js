$(function(){function i(){$.getJSON("/json/articles.json",function(i){g=i,s()})}function n(n){$.getJSON("/json/pageList.json",function(t){var o;d=t.length,o=d<6?d:6;!function(i){var n,e;for((e=i+o)>=d&&(e=d),n=i;n<e;n++){var a;a=t[n].img?t[n].img:"/img"+t[n].site.replace(".html","-s.jpg"),$("#content-grid>ul").append('<li><i class="'+t[n].tag+'"></i><h2>'+t[n].title+'</h2><h3><i class="icon-date"></i>'+t[n].date+'</h3><h3><i class="icon-author"></i>OXXO.STUDIO</h3><a href="'+t[n].site+'" title="'+t[n].title+'"><div class="content-img"><span></span><img class="lazy" data-src="'+a+'"></div></a><div class="content-grid-line"></div><h4 content="'+t[n].site+'"></h4><a href="'+t[n].site+'"><div class="read-more">Read more</div></a></li>')}}(6*(-1+n)),f=$(".lazy"),i(),e(d,n),a(),c(),$(window).scroll(c)})}function t(n,t){$.getJSON("/json/pageList.json",function(a){d=a.length;var s,l,r=[],h=0;for(s=0;s<d;s++)a[s].tag==n&&(r[h]=a[s],h+=1);l=h<6?h:6;!function(i){var n,t;for((t=i+l)>=h&&(t=h),n=i;n<t;n++){var e;e=r[n].img?r[n].img:"/img"+r[n].site.replace(".html","-s.jpg"),$("#content-grid>ul").append('<li><i class="'+r[n].tag+'"></i><h2>'+r[n].title+'</h2><h3><i class="icon-date"></i>'+r[n].date+'</h3><h3><i class="icon-author"></i>OXXO.STUDIO</h3><a href="'+r[n].site+'"><div class="content-img"><span></span><img class="lazy" data-src="'+e+'"></div></a><div class="content-grid-line"></div><h4 content="'+r[n].site+'"></h4><a href="'+r[n].site+'"><div class="read-more">Read more</div></a></li>')}}(6*(-1+t)),f=$(".lazy"),i(),e(h,t),o(),c(),$(window).scroll(c)})}function e(i,n){var t,e;for(t=Math.ceil(i/6),e=1;e<=t;e++)$("#page-num").append("<div>"+e+"</div>");$("#page-num div").hide(),n-3>=0&&$("#page-num div").eq(n-3).show(),n-2>=0&&$("#page-num div").eq(n-2).show(),$("#page-num div").eq(n-1).show(),$("#page-num div").eq(n).show(),$("#page-num div").eq(n+1).show(),$("#page-num div").eq(n+2).show(),$("#page-num div").eq(n+3).show(),$("#page-num div").eq(n-1).css({background:"#888",color:"#fff"})}function a(){$("#page-num div").on("click",function(){var i=$(this).index()+1;1==i?window.open(w,"_self"):window.open(w+"index.html?page="+i,"_self")})}function o(){$("#page-num div").on("click",function(){var i=$(this).index()+1;1==i?window.open(w+"index.html?"+h,"_self"):window.open(w+"index.html?"+h+"="+i,"_self")})}function s(){$("#content-grid>ul").find("h4").each(function(){var i=$(this),n=i.attr("content").split("/"),t="/"+n[n.length-2]+"/"+n[n.length-1];for(var e in g)for(var a in g[e])if(t=="/"+e+"/"+a+".html"){var o=g[e][a].body;i.html(o),i.html(i.text())}})}function c(){f.each(function(){if($(this).attr("data-src")){var i=$(this).attr("data-src");$(this).offset().top-p.height()<p.scrollTop()&&($(this).attr("src",i),$(this).removeAttr("data-src"))}})}var d,l,r,h,f,g,p=$(window),v=location.href,m=v.split("?"),u=v.split("/"),w=u[0]+"//"+u[2]+"/";-1!=v.indexOf(".html")&&-1==v.indexOf("?")&&(window.location.href="/"),m[1]?(l=m[1].split("="),h=l[0],(r=Number(l[1]))?"page"==h?n(r):-1!=h.indexOf("tag")?t(h,r):window.open("/","_self"):-1!=h.indexOf("tag")?t(h,1):window.open("/","_self")):n(1)});