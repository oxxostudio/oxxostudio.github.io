$(function(){function t(){if(h.width()>1e3){a=h.width(),contantWidth=s.width();var t=a/2+contantWidth/2+10,o=a/2+contantWidth/2+15,e=a/2-contantWidth/2-45;$(".social-icon").css({left:t+"px"}),$(".arrow-left").css({left:e+"px"}).attr("target","_top"),$(".arrow-right").css({left:o+"px"}).attr("target","_top"),h.scroll(function(){h.scrollTop()>150?$(".social-icon, .arrow-left, .arrow-right").not("animated").fadeIn(300):$(".social-icon, .arrow-left, .arrow-right").not("animated").fadeOut(300)})}else $(".social-icon, .arrow-left, .arrow-right").hide()}function o(t){$(".icon-home").on("click",function(){window.open("/index.html","_self")}),$(".icon-list").on("click",function(){window.open("/list.html","_self")}),$(".icon-facebook").on("click",function(){window.open("http://www.facebook.com/share.php?u="+t,"_blank"),i("share_to_facebook")}),$(".icon-google").on("click",function(){window.open("https://plus.google.com/share?url="+t,"_blank"),i("share_to_google")}),$(".icon-twitter").on("click",function(){window.open("http://twitter.com/home/?status="+t,"_blank"),i("share_to_twitter")}),$(".goto-top").on("click",function(){$("html,body").animate({scrollTop:"0"},750),i("goto_top")}),$(".previous-next").on("click",function(){i("previous-next")}),$(".content a").on("click",function(){var t=$(this).attr("href");i("link-to:"+t)}),$(".arrow-left, .arrow-right").on("click",function(){i("arrow-previous-next")})}function e(t,o){$.getJSON("/json/pageList.json",function(e){dataLength=e.length;var i,a,n=[],l=0;for(i=0;i<dataLength;i++)e[i].tag==t&&(n[l]=e[i],l+=1),-1!=e[i].site.indexOf(o)&&(a=i);var c=[];if(5>=l)for(console.log(l),r=0;l>r;r++)$("#other-articles").append('<a href="'+n[r].site+'"><div><img src="'+n[r].img+'"><h4>'+n[r].title+"</h4></div></a>");else for(r=l;r>=l-4;r--){var h=Math.floor(r*Math.random(r));c[r-5]=n.splice(h,1),$("#other-articles").append('<a href="'+c[r-5][0].site+'"><div><img src="'+c[r-5][0].img+'"><h4>'+c[r-5][0].title+"</h4></div></a>")}0==a?($(".next-article h4").html("沒有下一篇文章了呦~"),$(".previous-article h4").html("<a href="+e[a+1].site+">"+e[a+1].title+"</a>"),$(".arrow-right").css({top:"-100px"}),$(".arrow-left").attr("href",e[a+1].site).attr("title",e[a+1].title)):a==dataLength-1?($(".previous-article h4").html("沒有前一篇文章了呦~"),$(".next-article h4").html("<a href="+e[a-1].site+">"+e[a-1].title+"</a>"),$(".arrow-left").css({top:"-100px"}),$(".arrow-right").attr("href",e[a-1].site).attr("title",e[a-1].title)):($(".previous-article h4").html("<a href="+e[a+1].site+">"+e[a+1].title+"</a>"),$(".arrow-left").attr("href",e[a+1].site).attr("title",e[a+1].title),$(".next-article h4").html("<a href="+e[a-1].site+">"+e[a-1].title+"</a>"),$(".arrow-right").attr("href",e[a-1].site).attr("title",e[a-1].title))})}function i(t){ga("send","event",t,t)}var r,a,n,l,c=$(".article-date").attr("tag"),h=$(window),s=($(document),$(".content")),f=location.href;n=f.split("/"),l=n.pop(),$("pre").addClass("prettyprint"),$(".preview-img").unwrap("p"),$(".tag").addClass("tag-"+c),$(".md a").attr("target","_blank"),e("tag-"+c,l),t(),o(f),h.resize(t)});