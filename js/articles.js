$(function(){function t(){a=s.width()>1e3?s.width():1e3,contantWidth=h.width();var t=a/2+contantWidth/2+10;$(".social-icon").css({left:t+"px"})}function o(t){$(".icon-home").on("click",function(){window.open("/index.html","_self")}),$(".icon-list").on("click",function(){window.open("/list.html","_self")}),$(".icon-facebook").on("click",function(){window.open("http://www.facebook.com/share.php?u="+t,"_blank"),e("share_to_facebook")}),$(".icon-google").on("click",function(){window.open("https://plus.google.com/share?url="+t,"_blank"),e("share_to_google")}),$(".icon-twitter").on("click",function(){window.open("http://twitter.com/home/?status="+t,"_blank"),e("share_to_twitter")}),$(".goto-top").on("click",function(){$("html,body").animate({scrollTop:"0"},750),e("goto_top")}),$(".previous-next").on("click",function(){e("previous-next")}),$(".content a").on("click",function(){var t=$(this).attr("href");e("link-to:"+t)}),$(window).scroll(function(){e("scroll:"+l)})}function n(t,o){$.getJSON("/json/pageList.json",function(n){dataLength=n.length;var e,a,c=[],l=0;for(console.log(n.length),e=0;e<dataLength;e++)n[e].tag==t&&(c[l]=n[e],l+=1),-1!=n[e].site.indexOf(o)&&(a=e);var r=[];if(5>=l)for(console.log(l),i=0;l>i;i++)$("#other-articles").append('<a href="'+c[i].site+'"><div><img src="'+c[i].img+'"><h4>'+c[i].title+"</h4></div></a>");else for(i=l;i>=l-4;i--){var s=Math.floor(i*Math.random(i));r[i-5]=c.splice(s,1),$("#other-articles").append('<a href="'+r[i-5][0].site+'"><div><img src="'+r[i-5][0].img+'"><h4>'+r[i-5][0].title+"</h4></div></a>")}0==a?($(".next-article h4").html("沒有下一篇文章了呦~"),$(".previous-article h4").html("<a href="+n[a+1].site+">"+n[a+1].title+"</a>")):a==dataLength-1?($(".previous-article h4").html("沒有前一篇文章了呦~"),$(".next-article h4").html("<a href="+n[a-1].site+">"+n[a-1].title+"</a>")):($(".previous-article h4").html("<a href="+n[a+1].site+">"+n[a+1].title+"</a>"),$(".next-article h4").html("<a href="+n[a-1].site+">"+n[a-1].title+"</a>"))})}function e(t){ga("send","event",t,t)}var i,a,c,l,r=$(".article-date").attr("tag"),s=$(window),h=($(document),$(".content")),f=location.href;c=f.split("/"),l=c.pop(),$("pre").addClass("prettyprint"),$(".preview-img").unwrap("p"),$(".tag").addClass("tag-"+r),$(".md a").attr("target","_blank"),n("tag-"+r,l),t(),o(f),s.resize(t),s.scroll(function(){s.scrollTop()>150?$(".social-icon").not("animated").fadeIn(300):$(".social-icon").not("animated").fadeOut(300)})});